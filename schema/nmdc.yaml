id: https://microbiomedata/schema
name: NMDC Schema
description: >-
  Schema for National Microbiome Data Collaborative (NMDC)
license: https://creativecommons.org/publicdomain/zero/1.0/

prefixes:
  nmdc: https://microbiomedata/meta/
  mixs: https://w3id.org/gensc/
  wgs: http://www.w3.org/2003/01/geo/wgs84_pos
  qud: http://qudt.org/1.1/schema/qudt#
  dcterms: http://purl.org/dc/terms/
  biolinkml: https://w3id.org/biolink/biolinkml/
  
default_prefix: nmdc
default_range: string

default_curi_maps:
  - obo_context
  - idot_context

emit_prefixes:
  - rdf
  - rdfs
  - xsd
  - skos

# This file organizes the main NMDC schema
imports:
  - biolinkml:types
  - mixs
  - core
  
classes:

  database:
    description: top level holder class
    slots:
      - biosample set
      - data object set
  
  data object:
    is_a: named thing
    description: >-
      An object that primarily consists of symbols that represent information.  
      Files, records, and omics data are examples of data objects. 
    slots:
      - file_size

  biosample:
    is_a: named thing
    aliases: ['sample', 'material sample']
    description: >-
      A material sample. It may be environmental (encompassing many organisms) or isolate or tissue.  
      An environmental sample containing genetic material from multiple individuals is commonly referred to as a biosample.  
    slots:
      - env_package
      - lat_lon
      - geo_loc_name
      - collection_date
      - env_broad_scale
      - env_local_scale
      - env_medium
      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - depth
      - tot_org_carb
      - alt
      - elev
    slot_usage:
      id:
        description: >-
          The primary identifier for the biosample. Example: GOLD:Gb0205609
      name:
        description: >-
          A human readable name or description of the biosample
      alternate identifiers:
        description: >-
          The same biosample may have distinct identifiers in different databases (e.g. GOLD and EMSL)
      lat_lon:
        required: true
        description: >-
          This is a required field but it's not clear if this should be required for human hosts
      depth:
        required: false
      env_broad_scale:
        required: true
      env_local_scale:
        required: true
      env_medium:
        required: true

        
  study:
    is_a: named thing
    aliases: ['proposal', 'research proposal', 'research study', 'investigation']
    description: >-
      A study summarizes the overall goal of a research initiative and outlines the key objective of its underlying projects.  
    slots:
      - submitted_to_insdc
      - investigation_type
      - project_name
      - experimental_factor
#      - PI name
    slot_usage:
      id:
        description: >-
          The primary identifier for the study.
      name:
        description: >-
          A human readable name or description of the study.
      alternate identifiers:
        description: >-
          The same study may have distinct identifiers in different databases (e.g. GOLD and EMSL)

  biosample processing:
    is_a: named thing
    description: >-
      A process that takes one or more biosamples as inputs and generates one or as outputs.
      Examples of outputs include samples cultivated from another sample or data objects created by instruments runs.
    slots:
      - has input
    slot_usage:
      has input:
        range: biosample

  omics processing:
    is_a: biosample processing
    description: >-
      The methods and processes used to generate omics data from a biosample or organism.
    slots:
      - part of
      - has output
    slot_usage:
      id:
        description: >-
          The primary identifier for the omics processing. E.g. GOLD:GpNNNN
      name:
        description: >-
          A human readable name or description of the omics processing.
      alternate identifiers:
        description: >-
          The same omics processing may have distinct identifiers in different databases (e.g. GOLD and EMSL)
      part of:
        range: study
      has output:
        range: data object

  person:
    is_a: named thing
    description: >-
      represents a person, such as a researcher
    slot_usage:
      id:
        description: >-
          Should be an ORCID. Specify in CURIE format. E.g ORCID:0000-1111-...
    

slots:

  biosample set:
    domain: database
    range: biosample

  data object set:
    domain: database
    range: data object
  

  has input:
    aliases: ['input']
    domain: named thing
    # range: named thing
    multivalued: true
    description: >-
      An input to a process.
    
  has output:
    aliases: ['output']
    #domain: named thing
    #range: named thing
    multivalued: true
    description: >-
      An output biosample to a processing step

  
  part of:
    aliases: ['is part of']
    domain: named thing
    multivalued: true
    slot_uri: http://purl.org/dc/terms/isPartOf
    description: >-
      Links a resource to another resource that either logically or physically includes it.

  ## DATA

  file_size:
    is_a: attribute
    description: >-
      units should be bytes.. may be overkill to allow different units
    
  ## GOLD PATHS

  gold_path_field:
    is_a: attribute
    abstract: true
    
  ecosystem:
    is_a: gold_path_field
  ecosystem_category:
    is_a: gold_path_field
  ecosystem_type:
    is_a: gold_path_field
  ecosystem_subtype:
    is_a: gold_path_field
  specific_ecosystem:
    is_a: gold_path_field
